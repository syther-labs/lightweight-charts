import{q as w,e as P}from"./lightweight-charts.production-CA2iJLZ7.js";import{g as x}from"./sample-data-x_8-FZm1.js";const _=40,f=3,b=2,m=10,h=12,y=4;class T{_data=null;update(t){this._data=t}draw(t){t.useMediaCoordinateSpace(i=>{if(!this._data)return;const s=this._calculatePriceScale(i.mediaSize.height,this._data),a=s.reduce((c,l)=>Math.max(c,l.label.length),0),r="".padEnd(a,"0"),e=i.context,n=this._data.options.side==="left";e.font=`${h}px -apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif`,e.textAlign="center",e.textBaseline="top";const o=e.measureText(r).width,u=n?m:i.mediaSize.width-m-o,g=u+f+Math.round(o/2);s.forEach(c=>{e.beginPath();const l=c.y-h/2;e.roundRect(u,l,o+f*2,h+2*b,y),e.fillStyle=this._data.options.backgroundColor,e.fill(),e.beginPath(),e.fillStyle=this._data.options.textColor,e.fillText(c.label,g,l+b,o)})})}_calculatePriceScale(t,i){const s=[],a=Math.round(_/4);let r=a;for(;r<=t-a;)s.push(r),r+=_;return s.map(n=>{const d=i.coordinateToPrice(n);return d===null?null:{label:i.priceFormatter.format(d),y:n}}).filter(n=>!!n)}}class v{_renderer;constructor(){this._renderer=new T}renderer(){return this._renderer}update(t){this._renderer.update(t)}}const L={textColor:"rgb(0, 0, 0)",backgroundColor:"rgba(255, 255, 255, 0.6)",side:"left"};class C{_paneViews;_chart=null;_series=null;_requestUpdate;_options;constructor(t){this._options={...L,...t},this._paneViews=[new v]}applyOptions(t){this._options={...this._options,...t},this._requestUpdate&&this._requestUpdate()}attached({chart:t,series:i,requestUpdate:s}){this._chart=t,this._series=i,this._requestUpdate=s}detached(){this._chart=null,this._series=null}updateAllViews(){if(!this._series||!this._chart)return;const t=e=>this._series.coordinateToPrice(e),i=e=>this._series.priceToCoordinate(e),s=this._series.priceFormatter(),a=this._options,r={coordinateToPrice:t,priceToCoordinate:i,priceFormatter:s,options:a};this._paneViews.forEach(e=>e.update(r))}paneViews(){return this._paneViews}}const M=window.chart=w("chart",{autoSize:!0,rightPriceScale:{visible:!1},grid:{horzLines:{visible:!1}}}),S=M.addSeries(P,{priceScaleId:"overlay"}),V=x();S.setData(V);S.attachPrimitive(new C({}));
