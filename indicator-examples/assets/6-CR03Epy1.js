import{e as h,q as l,g as u,D as _,h as S}from"./sample-data-DY_WE15M.js";import{c as p}from"./median-price-calculation-B_oJYv0G.js";function D(t,i){class a{_baseSeries=null;_indicatorSeries=null;_chart=null;_options=null;attached(e){const{chart:s,series:o}=e;this._chart=s,this._baseSeries=o,this._indicatorSeries=this._chart.addSeries(h),this._options=i,o.subscribeDataChanged(this._updateData),this._updateData()}detached(){this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&this._chart?.removeSeries(this._indicatorSeries),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(e){this._options={...this._options||{},...e},this._updateData()}_updateData=()=>{if(!this._indicatorSeries)return;if(!this._baseSeries){this._indicatorSeries.setData([]);return}const e=this._baseSeries.data(),s=p(e,this._options||i);this._indicatorSeries.setData(s)}}const n=new a;return t.attachPrimitive(n),n.indicatorSeries()}const m={autoSize:!0},d=l("chart",m),c=u(150,new Date(2024,0,1)),[f,b]=[c.slice(0,100),c.slice(100)],r=d.addSeries(_,{});r.setData(f);const y=D(r,{offset:2});y.applyOptions({color:"purple",lineWidth:2,lineStyle:S.Solid});d.timeScale().fitContent();setTimeout(async()=>{function t(i){return new Promise(a=>{setTimeout(a,i)})}for(const i of b)r.update(i),await t(200)},2e3);
